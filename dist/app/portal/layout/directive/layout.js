define(["connecta.portal","portal/layout/directive/heading","portal/layout/directive/menu","portal/layout/directive/sidebar","portal/layout/service/layout"],function(portal){return portal.directive("layout",function(){return{restrict:"AE",replace:true,templateUrl:"app/portal/layout/directive/template/layout.html",controller:["$scope","LayoutService","SidebarService",function($scope,LayoutService,SidebarService){$scope.showAsFlat=false;$scope.fullscreen=false;$scope.showMenu=LayoutService.isMenuVisible();$scope.showSidebar=false;$scope.sidebarMini=SidebarService.isSidebarMini();$scope.authenticated=false;$scope.showHeading=true;$scope.$on("menu.mini",function(ev,show){$scope.showMenu=show});$scope.$on("login.authenticated",function(ev,authenticated){$scope.authenticated=authenticated});$scope.$on("heading.show",function(ev,show){$scope.showHeading=show});$scope.$on("sidebar.show",function(ev,val){$scope.showSidebar=val});$scope.$on("sidebar.mini",function(ev,val){$scope.sidebarMini=val});$scope.$on("page.flat",function(ev,val){$scope.showAsFlat=val});$scope.$on("page.fullscreen",function(ev,val){$scope.fullscreen=val})}]}})});