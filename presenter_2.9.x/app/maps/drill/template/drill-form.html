<div class="row">
    <div class="col-md-12">        
        <h3 translate>{{isEditing ? 'DRILL.EDIT' : 'DRILL.ADD'}}</h3>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <form novalidate name="formulario" ng-submit="submit()">

            <div class="form-group">
                <label for="name" translate>DRILL.NAME</label>
                <input type="text" class="form-control" id="name" name="name"
                       ng-model="drill.name" required/>
                <div ng-show="formulario.name.$touched" ng-messages="formulario.name.$error"
                     ng-messages-include="portal-error-messages"></div>
            </div>

            <div class="form-group">
                <label for="analysis" translate>DRILL.ANALYSIS</label>
                <select class="form-control" 
                        name="analysis" 
                        ng-model="drill.analysis"
                        id="analysis" 
                        ng-options="analysis.title for analysis in presenterAnalysis" required>
                    <option value="" translate> DRILL.ANALYSIS_SELECT</option>
                </select>
                <div ng-show="formulario.analysis.$touched" ng-messages="formulario.analysis.$error"
                     ng-messages-include="portal-error-messages"></div>
            </div>


            <box-table-maps title="DrillLevel">
                <a type="button"  class="btn btn-maps" href="" ng-click="openModal();">Adicionar</a>
                <table ng-table="tableParams">
                    <thead>
                        <tr>
                            <th translate>DRILL_LEVEL.NAME</th>
                            <th translate>DRILL_LEVEL.PARENT_LEVEL</th>
                            <th translate>DRILL_LEVEL.PARENT_LEVEL_COLUMN</th>
                            <th translate>DRILL_LEVEL.CHILD_LEVEL</th>
                            <th translate>DRILL_LEVEL.CHILD_LEVEL_COLUMN</th>
                            <th translate>DRILL_LEVEL.ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="drillLevel in drillLevels">
                            <td class="text-left">{{drillLevel.name}}</td>
                            <td class="text-left">{{drillLevel.parentViewer.nm_viewer}}</td>
                            <td class="text-left">{{drillLevel.parentColumn.columnName}}</td>
                            <td class="text-left">{{drillLevel.childViewer.nm_viewer}}</td>
                            <td class="text-left">{{drillLevel.childColumn.columnName}}</td>
                            <td>
                                <div class="btn-group">
                                    <a href="" role="button" class="btn btn-sm btn-danger" ng-click="openModal({{drillLevel}});">
                                        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                    </a>

                                    <a href="" role="button" class="btn btn-sm btn-danger" ng-click="deleteDrillLevel({{drillLevel}});">
                                        <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                    </a>                                  
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </box-table-maps>
            </br>

            <a href="#/maps/drill"
               class="btn btn-default" translate>
                LAYOUT.CANCEL
            </a>
            <button class="btn btn-primary" translate ng-disabled="formulario.$invalid || drillLevels.length <= 1">
                LAYOUT.SAVE
            </button>            
        </form>
    </div>
</div>
